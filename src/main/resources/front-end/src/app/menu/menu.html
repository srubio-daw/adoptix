<div class="row">
	<div class="pull-right">
		<button class="btn btn-default" (click)="login.open()"><span translate="menu.login"></span></button>
		<button class="btn btn-default" (click)="register.open()"><span translate="menu.createUser"></span></button>
	</div>
</div>

<!-- Modal de registro -->
<modal #register (onClose)="submitRegisterForm(registerForm, register)" (onDismiss)="resetForm(registerForm)">
    <modal-header [show-close]="true">
        <h4 class="modal-title"><span translate="menu.login"></span></h4>
    </modal-header>
    <modal-body>
    	<form class="form-horizontal" [formGroup]="registerForm">
    		<div class="form-group" [ngClass]="{'has-error': association.touched && !association.valid}">
				<label class="control-label col-md-5 text-right"><span translate="register.association"></span></label>
				<label class="control-label label-inline col-md-2">Si <input type="radio" value="yes" [formControl]="association"></label>
				<label class="control-label label-inline col-md-2">No <input type="radio" value="no" [formControl]="association"></label>
				<div class="row">
					<div class="col-md-7 col-md-offset-4">
						<span class="help-block" *ngIf="association.touched && !association.valid" translate="form.required"></span>
					</div>
				</div>
    		</div>
    		<div class="form-group" [ngClass]="{'has-error': name.touched && !name.valid}">
    			<label class="control-label col-md-4"><span translate="register.name"></span></label>
    			<div class="col-md-8">
    				<input class="form-control" type="text" [formControl]="name">
    				<span class="help-block" *ngIf="name.touched && !name.valid" translate="form.required"></span>
    			</div>
    		</div>
    		<div class="form-group" *ngIf="association.value=='no'" [ngClass]="{'has-error': surname.touched && !surname.valid}">
    			<label class="control-label col-md-4"><span translate="register.surname"></span></label>
    			<div class="col-md-8">
    				<input class="form-control" type="text" [formControl]="surname">
    				<span class="help-block" *ngIf="surname.touched && !surname.valid" translate="form.required"></span>
    			</div>
    		</div>
    		<div class="form-group" *ngIf="association.value=='yes'" [ngClass]="{'has-error': nif.touched && !nif.valid}">
    			<label class="control-label col-md-4"><span translate="register.id"></span></label>
    			<div class="col-md-8">
    				<input class="form-control" type="text" [formControl]="nif">
    				<span class="help-block" *ngIf="nif.touched && !nif.valid" translate="form.required"></span>
    			</div>
    		</div>
    		<div class="form-group" [ngClass]="{'has-error': address.touched && !address.valid}">
    			<label class="control-label col-md-4"><span translate="register.address"></span></label>
    			<div class="col-md-8">
    				<input class="form-control" type="text" [formControl]="address">
    				<span class="help-block" *ngIf="address.touched && !address.valid" translate="form.required"></span>
    			</div>
    		</div>
    		<div class="form-group" [ngClass]="{'has-error': province.touched && !province.valid}">
    			<label class="control-label col-md-4"><span translate="register.province"></span></label>
    			<div class="col-md-8">
    				<select class="form-control" [formControl]="province">
    					<option value="0">- Selecciona una -</option>
    					<option *ngFor="let province of provinces" [value]="province.id">{{province.name}}</option>
    				</select>
    				<span class="help-block" *ngIf="province.touched && !province.valid" translate="form.required"></span>
    			</div>
    		</div>
    		<div class="form-group" [ngClass]="{'has-error': username.touched && !username.valid}">
    			<label class="control-label col-md-4"><span translate="register.username"></span></label>
    			<div class="col-md-8">
    				<input class="form-control" type="text" [formControl]="username">
    				<span class="help-block" *ngIf="username.touched && !username.valid" translate="form.required"></span>
    			</div>
    		</div>
    		<div class="form-group" [ngClass]="{'has-error': registerMail.touched && !registerMail.valid}">
    			<label class="control-label col-md-4"><span translate="login.mail"></span></label>
    			<div class="col-md-8">
    				<input class="form-control" type="mail" [formControl]="registerMail">
                    <div *ngIf="registerMail.touched && !registerMail.valid">
    				    <span class="help-block" *ngIf="registerMail.hasError('required')" translate="form.required"></span>
                        <span class="help-block" *ngIf="!registerMail.hasError('required') && registerMail.hasError('email')" translate="form.validEmail"></span>
                    </div>
    			</div>
    		</div>
    		<div class="form-group" [ngClass]="{'has-error': registerPass.touched && !registerPass.valid}">
    			<label class="control-label col-md-4"><span translate="login.password"></span></label>
    			<div class="col-md-8">
    				<input class="form-control" type="password" [formControl]="registerPass">
    				<span class="help-block" *ngIf="registerPass.touched && !registerPass.valid" translate="form.required"></span>
    			</div>
    		</div>
    		<div class="form-group" [ngClass]="{'has-error': passRepeat.touched && !passRepeat.valid}">
    			<label class="control-label col-md-4"><span translate="register.passwordRepeat"></span></label>
    			<div class="col-md-8">
    				<input class="form-control" type="password" [formControl]="passRepeat">
                    <div *ngIf="passRepeat.touched && !passRepeat.valid">
                        <span class="help-block" *ngIf="passRepeat.hasError('required')" translate="form.required"></span>
                        <span class="help-block" *ngIf="passRepeat.hasError('passwordRepeat')" translate="form.repeatPassword"></span>
                    </div>
    			</div>
    		</div>
    	</form>
    </modal-body>
    <modal-footer [show-default-buttons]="false">
    	<button type="button" class="btn btn-default" data-dismiss="modal" (click)="resetForm(registerForm)"><span translate="button.cancel"></span></button>
        <button type="button" class="btn btn-primary" (click)="registerUser(registerForm, register)" [disabled]="!registerForm.valid"><span translate="register.createUser"></span></button>
    </modal-footer>
</modal>

<!-- Modal de inicio de sesiÃ³n -->
<modal #login>
    <modal-header [show-close]="true">
        <h4 class="modal-title"><span translate="menu.login"></span></h4>
    </modal-header>
    <modal-body>
    	<form class="form-horizontal" [formGroup]="loginForm">
        	<div class="form-group" [ngClass]="{'has-error': loginMail.touched && !loginMail.valid}">
    			<label class="control-label col-md-3"><span translate="login.mail"></span></label>
    			<div class="col-md-9">
    				<input class="form-control" type="mail" [formControl]="loginMail">
                    <div *ngIf="loginMail.touched && !loginMail.valid">
                        <span class="help-block" *ngIf="loginMail.hasError('required')" translate="form.required"></span>
                        <span class="help-block" *ngIf="loginMail.hasError('maxlength')" translate="form.maxLength" [translateParams]="{maxLength: 150}"></span>
                    </div>
    			</div>
    		</div>
    		<div class="form-group" [ngClass]="{'has-error': loginPass.touched && !loginPass.valid}">
    			<label class="control-label col-md-3"><span translate="login.password"></span></label>
    			<div class="col-md-9">
    				<input class="form-control" type="password" [formControl]="loginPass">
                    <span class="help-block" *ngIf="loginPass.touched && !loginPass.valid" translate="form.required"></span>
    			</div>
    		</div>
    	</form>
    </modal-body>
    <modal-footer [show-default-buttons]="false">
    	<button type="button" class="btn btn-default" data-dismiss="modal" (click)="resetForm(loginForm)">
            <span translate="button.cancel"></span>
        </button>
        <button type="button" class="btn btn-primary" (click)="submitLoginForm(loginForm, login)" [disabled]="!loginForm.valid">
            <span translate="menu.login"></span>
        </button>
    </modal-footer>
</modal>